package by.academy.service;

import by.academy.dao.DaoImpl;
import by.academy.entity.Role;
import by.academy.entity.User;
import by.academy.exception.DaoException;
import by.academy.exception.ServiceErrorCode;
import by.academy.exception.ServiceException;
import org.apache.log4j.Logger;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.annotation.Qualifier;
import org.springframework.stereotype.Service;
import org.springframework.transaction.TransactionStatus;
import org.springframework.transaction.support.TransactionCallback;
import org.springframework.transaction.support.TransactionTemplate;

import java.io.Serializable;

/**
 * Created with IntelliJ IDEA.
 * User: Kruglik
 * Date: 10/24/13
 * Time: 12:28 AM
 * To change this template use File | Settings | File Templates.
 */
@Service
public class ServiceImpl<T, PK extends Serializable> implements IService<T, PK> {

    private static Logger log = Logger.getLogger(ServiceImpl.class);
    @Autowired
    private DaoImpl<T, PK> dao;


    public void setDaoImpl(DaoImpl<T, PK> dao) {
	this.dao = dao;
    }


    public T get(PK id) throws ServiceException {
	try {
	    return dao.get(id);
	} catch (DaoException e) {
	    throw new ServiceException(e, ServiceErrorCode.ERR_SRVC_102, id);
	}
    }

    public T add(T o) throws ServiceException {
	try {
	    o = dao.add(o);
	    return o;
	} catch (DaoException e) {
	    throw new ServiceException(e, ServiceErrorCode.ERR_SRVC_100);
	}

    }

    public void update(T o) throws ServiceException {
	try {
	    dao.update(o);
	} catch (DaoException e) {
	    throw new ServiceException(e, ServiceErrorCode.ERR_SRVC_101);
	}
    }

    public void delete(T o) throws ServiceException {
	try {
	    dao.delete(o);
	} catch (DaoException e) {
	    throw new ServiceException(e, ServiceErrorCode.ERR_SRVC_105);
	}
    }


}
